<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="assets/stylesheet.css">
    <title>Weather Dashboard</title>
</head>
<body>
    <header>Weather Dashboard</header>
    <div class="container-fluid">
        <div class="row">
            <div id="submission" class="col-4">
                <h3>Search for a city</h3>
                <input type="text">
                <button id="searchBtn" type="submit">Search</button>
                <div id="history" class="card">
                    <button class="card-body">These will be generated in the javascript</button>
                    <button class="card-body">For each time the search button is pressed</button>
                    <button class="card-body">It will create a button with the city name you searched</button>
                </div>
            </div>
            <div id="weather-information" class="col-8">
                <div class="card col-12">
                    <h2 class="card-header">This will have the city name and date, and will be randomly generated</h2>
                    <p id="temperature" class="card-body">temperature</p>
                    <p id="humidity" class="card-body">humidity</p>
                    <p id="windSpeed" class="card-body">wind speed</p>
                    <p id="UVIdx" class="card-body">UV index</p>
                </div>
                <div id="forecast" class="card col-12">
                    <h3>5-Day Forecast:</h3>
                    <span id="5DayForecast" class="card-body">This is where the 5 day forecast will be generated</span>
                </div>
            </div>
        </div>
    </div>
    <footer>What's the weather like? Well lets find out!</footer>

    

    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script type="text/javascript">
    $(document).ready(function(){
         $("#searchBtn").on("click", function(){
            var city = $("input").val();
            var APIKey = "fcb576af35c3fbdedb5fb9ae90dcf378";
            var currWeather = "https://api.openweathermap.org/data/2.5/weather?q=" + city + "&appid=" + APIKey;
            

            $.ajax({
            url: currWeather,
            method: "GET"
            }).then(function(response) {
                console.log(response);
                var tempK = response.main.temp;
                var tempF = ((tempK-273.15)*1.8)+32;
                console.log(tempF)
                var humidity = response.main.humidity
                var windSpeed = response.wind.speed
                var lat = response.coord.lat
                var lon = response.coord.lon
                var UVIdx
                console.log(lat)

                var UVData = "http://api.openweathermap.org/data/2.5/uvi?lat=" + lat + "&lon=" + lon + "&appid=" + APIKey;

                $.ajax({
                url: UVData,
                method: "GET"
                }).then(function(UVInfo) {
                    console.log(UVInfo.value)
                    UVIdx = UVInfo.value
                    
                })
            });
           
        })
    // GIVEN a weather dashboard with form inputs
    // WHEN I search for a city
    // THEN I am presented with current and future conditions for that city and that city is added to the search history
    // WHEN I view current weather conditions for that city
    // THEN I am presented with the city name, the date, an icon representation of weather conditions, the temperature, the humidity, the wind speed, and the UV index
    // WHEN I view the UV index
    // THEN I am presented with a color that indicates whether the conditions are favorable, moderate, or severe
    // WHEN I view future weather conditions for that city
    // THEN I am presented with a 5-day forecast that displays the date, an icon representation of weather conditions, the temperature, and the humidity
    // WHEN I click on a city in the search history
    // THEN I am again presented with current and future conditions for that city
    // WHEN I open the weather dashboard
    // THEN I am presented with the last searched city forecast
    });
    </script>
</body>
</html>